<!doctype html>


    <!--                             kalt.co                                -->


    <!--                                (                                   -->
    <!--                    .            )        )                         -->
    <!--                              (  (|              .                  -->
    <!--                         )   )\/ ( ( (                              -->
    <!--                 *  (   ((  /     ))\))  (  )    )                  -->
    <!--               (     \   )\(          |  ))( )  (|                  -->
    <!--               >)     ))/   |          )/  \((  ) \                 -->


<html lang="en">
  <head>
    <!-- Setting the title -->
    <title> Kalt — Art collection </title>
    <!-- Including the base stylesheet -->
    <link rel="stylesheet" href="https://kalt.co/css/base.css">
    <!-- Defining the character set used -->
    <meta charset="UTF-8">
    <!-- Setting the viewport to make your website look good on all devices: -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Asking search engines not to index the website: -->
    <meta name=”robots” content=”noindex”>
    <!-- Adding description -->
		<meta name="description" content="Carefully curated art">
		<!-- Adding theme color -->
		<meta name="theme-color" content="#FCF9F2"/>
    <!-- Favicon -->
		<style>
		.item{
			display:none;
		}
		.item.active{
			display:block;
		}
		</style>
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.kalt.co/media/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.kalt.co/media/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn.kalt.co/media/favicon/favicon-16x16.png">
  </head>
  <body>
    <header>
			<a href="/">
	      <button class="logo"><span>Kalt </span>— Art collection</button>
			</a>
      <nav class="menu">
				<a href="https://kalt.co/menu.html">
	        <button class="menu">
	          menu
	        </button>
				</a>
        <ul id="main">
        </ul>
				<ul id="contextual">
				</ul>
      </nav>
    </header>

    <!--
      Start the store
    -->
    <div class="page" id="art">

      <!--
        Featured section
      -->
      <div class="section">
        <h1>
          Find carefully curated art
        </h1>
        <p>
          We curate art from upencoming and established artists from all around the world.
        </p>
        <!--<input type="text" class="search"   placeholder="Search" ></input>-->
      </div>
      <div class="section grid list" id="store">
      </div>
    </div>
    <!-- Including jquery -->
    <script src="https://kalt.co/js/lib/jq.js"></script>
    <!-- Including artwork array -->
    <script src="https://kalt.co/js/artworks.js"></script>
    <!-- Including store javascript -->
    <script>
			const space = "xdtovtw3dsvp";
			const content = "artwork"; // content type
			const token = "rZP5wX9KmtkpApVSxPK_e9mnYImLR7wi7MbepyyFxgw";
			const object = document.getElementById("store");


			var formatter = new Intl.NumberFormat('en-US', {
			  style: 'currency',
			  currency: 'NOK',
				maximumFractionDigits: 0
			});


			async function getEntries(){
				// Get the fields
				await fetch(
				  "https://cdn.contentful.com/spaces/" +
				  space +
				  "/environments/master/entries/?access_token=" + token + "&content_type=" + content).then(res => {
					return res.json()
				}).then(data => {
						data.items.forEach((item)=>{
							fetch(
								"https://cdn.contentful.com/spaces/" +
								space +
								"/environments/master/assets/" + item.fields.media[0].sys.id + "?access_token=" + token).then(asset_res => {
								return asset_res.json()
							}).then(asset_data => {
								fetch(
									"https://cdn.contentful.com/spaces/" +
									space +
									"/environments/master/entries/" + item.fields.artist.sys.id + "?access_token=" + token).then(artist_res => {
									return artist_res.json()
								}).then(artist_data => {

									object.insertAdjacentHTML('beforeend', '<a href="https://kalt.co/→?=' + item.sys.id + '"><div class="item active"><div class="image" style="filter:grayscale(0);background-image:url(https://'+ asset_data.fields.file.url +');"></div><div class="body"><h2 class="title">' + item.fields.title + '</h2><p class="byline">' + artist_data.fields.artistName + '</p></div><button class="more">' + formatter.format(item.fields.price) + ' NOK</button></div></a>');
								});
							});
						});
					});
				};
				// Get the artist
				getEntries();
		</script>
    <!-- Generating the menu -->
    <script src="https://kalt.co/js/menu.js"></script>
  </body>

</html>
